<!DOCTYPE html>
<html>
   <head>
      <title>Penny.com</title>

      <meta name="viewport"
         content="width=device-width, initial-scale=1">

<link rel="stylesheet" href=
"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">

   </head>

   <body>
      <div class="container-fluid"
         style="background-color:#295078; color:white">
         <center>
            <h2 class="d-none d-sm-block">Penny.com</h2>
            <h3>Good <span id="ampmSpan"></span> and welcome to
            Penny.com</h3>
         </center>
      </div>

      <br>

      <div class="container-fluid">
         <div class="row">
            <div class="col-sm-3"><h5>Author name:</h5></div>
            <div class="col-sm-9">
               <input type="text" class="form-control"
                  id="authorInput" autoFocus>
            </div>
         </div>
         <br>
         <div class="row">
            <div class="col-sm-3"><h5>Books:</h5></div>
            <div class="col-sm-9">
               <div class="border" id="booksDiv"></div>
            </div>
         </div>
      </div>

      <br>

      <div class="container-fluid"
         style="background-color:#295078; color:white">
         <center>
            Date and time: <span id="datetimeSpan"></span><br>
            Created by <a
            href="http://www.cs.princeton.edu/~rdondero">
            Bob Dondero</a>
         </center>
      </div>

      <script src=
     "https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js">
      </script>

      <script>

         'use strict';

         function getAmPm()
         {
            let dateTime = new Date();
            let hours = dateTime.getHours();
            let amPm = "morning";
            if (hours >= 12)
               amPm = "afternoon";
            $('#ampmSpan').html(amPm);
         }

         function getDateTime()
         {
            let dateTime = new Date();
            $('#datetimeSpan').html(dateTime.toLocaleString());
         }

         function handleResponse(response)
         {
            $('#booksDiv').html(response);
         }

         let request = null;

         function getResults()
         {
            let author = $('#authorInput').val();
            author = encodeURIComponent(author);
            let url = '/searchresults?author=' + author;

            if (request != null)
               request.abort();

            request = $.ajax(
               {
                  type: 'GET',
                  url: url,
                  success: handleResponse
               }
            );
         }

         function setup()
         {
            getAmPm();
            window.setInterval(getAmPm, 1000);
            getDateTime();
            window.setInterval(getDateTime, 1000);
            $('#authorInput').on('input', getResults);
         }

         $('document').ready(setup);

      </script>
   </body>
</html>
